<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Single-Cell Multimodal Topic Modeling • mTopic</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Single-Cell Multimodal Topic Modeling">
<meta property="og:description" content="mTopic is an open-source library with computational tools for modeling spatial multimodal topics in single-cell data.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">mTopic</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">Get Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tutorials

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/tutorial-1-data-preparation.html">Data Preparation</a>
    </li>
    <li>
      <a href="articles/tutorial-2-P22-mouse-brain.html">P22 Mouse Brain (ATAC + RNA)</a>
    </li>
    <li>
      <a href="articles/tutorial-3-human-tonsil.html">Human Tonsil (RNA + Protein Epitopes)</a>
    </li>
    <li>
      <a href="articles/tutorial-4-human-pbmc.html">Human PBMC (ATAC + RNA + Protein Epitopes)</a>
    </li>
  </ul>
</li>
<li>
  <a href="reference/index.html">API</a>
</li>
<li>
  <a href="https://github.com/TabakaLab/mTopic" class="external-link">Python Package</a>
</li>
<li>
  <a href="https://github.com/TabakaLab/mTopic/tree/main/dashboard" class="external-link">Interactive Dashboard</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/TabakaLab/mTopicR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">

<p><img src="mTopic_logo_light_background.png"></p>
<p>This is a wrapper of the <a href="https://github.com/TabakaLab/mTopic" class="external-link">mTopic Python library</a>, dedicated to R users. The package provides seamless integration with Seurat object data. The API along with vignettes demonstrating how the method works can be found at <a href="https://TabakaLab.github.io/mTopicR" class="external-link">https://TabakaLab.github.io/mTopicR</a>.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="section level3">
<h3 id="download-python-package-and-create-virtual-environment">Download Python package and create virtual environment<a class="anchor" aria-label="anchor" href="#download-python-package-and-create-virtual-environment"></a>
</h3>
<p>Download the main Python package from the repository <a href="https://github.com/TabakaLab/mTopic" class="external-link uri">https://github.com/TabakaLab/mTopic</a>. Remember to set your own package location for the <code>mTopic_python_path</code> variable. Don’t change <code>env_name</code> unless you have a very good reason to do so. For more details, read <a href="#notes-about-the-virtual-environment">Notes about the virtual environment</a>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mTopic_python_path</span> <span class="op">&lt;-</span> <span class="st">"/path/to/python/mtopic"</span> <span class="co"># Change to your own path</span></span>
<span><span class="va">env_name</span> <span class="op">&lt;-</span> <span class="st">"mTopic_r_package"</span> <span class="co"># Don't change this name unless necessary</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"reticulate"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"reticulate"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/conda-tools.html" class="external-link">condaenv_exists</a></span><span class="op">(</span><span class="va">env_name</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/conda-tools.html" class="external-link">conda_create</a></span><span class="op">(</span></span>
<span>    envname <span class="op">=</span> <span class="va">env_name</span>,</span>
<span>    python_version <span class="op">=</span> <span class="st">"3.11.2"</span>,</span>
<span>    packages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"openssl=3.2.0"</span>,</span>
<span>      <span class="st">"libcurl=8.4"</span>,</span>
<span>      <span class="st">"h5py"</span>,</span>
<span>      <span class="st">"muon"</span>,</span>
<span>      <span class="st">"matplotlib"</span>,</span>
<span>      <span class="st">"anndata=0.10.8"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    channel <span class="op">=</span> <span class="st">"conda-forge"</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/py_install.html" class="external-link">py_install</a></span><span class="op">(</span></span>
<span>    packages <span class="op">=</span> <span class="va">mTopic_python_path</span>,</span>
<span>    envname <span class="op">=</span> <span class="va">env_name</span>,</span>
<span>    pip <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="install-r-package">Install R package<a class="anchor" aria-label="anchor" href="#install-r-package"></a>
</h3>
<p>After creating the virtual environment, install the package directly from the GitHub repository:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"devtools"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"TabakaLab/mTopicR"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="notes-about-the-virtual-environment">Notes about the virtual environment<a class="anchor" aria-label="anchor" href="#notes-about-the-virtual-environment"></a>
</h2>
<ul>
<li>Installing the mTopic R wrapper requires creating a virtual environment beforehand, preferably using conda, which will contain the main Python package.</li>
<li>By default, the wrapper activates an environment named <code>mTopic_r_package</code>. If for some reason the user wants the environment to have a different name, e.g., <code>different-env-name</code>, then loading the package instead of just <code><a href="https://github.com/TabakaLab/mTopicR" class="external-link">library(mTopic)</a></code> must be preceded by <code>options('MTOPIC_ENV_NAME' = 'different-env-name')</code>:</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="st">'MTOPIC_ENV_NAME'</span> <span class="op">=</span> <span class="st">'different-env-name'</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TabakaLab/mTopicR" class="external-link">mTopic</a></span><span class="op">)</span></span></code></pre></div>
<ul>
<li>In case of having several conda versions and potential conflicts, the user can specify the exact path to their environment:</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="st">'MTOPIC_ENV_NAME'</span> <span class="op">=</span> <span class="st">'/path/to/my/mtopic/env'</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TabakaLab/mTopicR" class="external-link">mTopic</a></span><span class="op">)</span></span></code></pre></div>
<p>Keep in mind that the above notes only apply to the scenario where the name of the mTopic virtual environment is changed. By default, the user loads the package as usual:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TabakaLab/mTopicR" class="external-link">mTopic</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="reproducibility">Reproducibility<a class="anchor" aria-label="anchor" href="#reproducibility"></a>
</h2>
<p>Please be aware that certain outputs from the R wrapper may differ slightly from those presented in the tutorials of the original Python package. This is primarily due to differences in how Python and R manage random state initialization, which can lead to differing results in random number generation, even when the same seed is applied. Discrepancies may also arise from employing different methods for selecting highly variable genes; the R wrapper utilizes Seurat’s <code>FindVariableFeatures</code> function, while the original Python implementation relies on the <code>highly_variable_genes</code> function from the Scanpy package. However, from a qualitative perspective, the results of the topic modeling remain consistent across both packages.</p>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/TabakaLab/mTopicR/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/TabakaLab/mTopicR/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing mTopic</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Damian Panas <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-2181-2414" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Piotr Rutkowski <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-8009-0816" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Damian Panas, Piotr Rutkowski.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
